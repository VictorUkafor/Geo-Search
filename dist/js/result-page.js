"use strict";const input=document.querySelector(".search-field"),messageDiv=document.querySelector(".message"),clearIcon=document.querySelector(".cancel"),changeTemp=e=>{const a=document.querySelector(".temp-item"),n=document.querySelector("#temp-button");if(localStorage.getItem("tempUnit"))if("F"===localStorage.getItem("tempUnit")){const e=((localStorage.getItem("tempValue")-32)*(5/9)).toFixed(2);localStorage.setItem("tempUnit","C"),localStorage.setItem("tempValue",e),a.innerHTML=`<i class="fa fa-circle condition-symbol"></i>\n        <span class="condition-name">Temperature:</span>\n        <span class="condition-value">${localStorage.getItem("tempValue")}\n        <span class="condition-unit">\n        &#176;C</span></span>`,n.innerHTML='<i class="fa fa-thermometer thermo"></i>\n        <span class="thermo-span">Convert &#176C to &#176F</span>'}else{const e=(1.8*localStorage.getItem("tempValue")+32).toFixed(2);localStorage.setItem("tempUnit","F"),localStorage.setItem("tempValue",e),a.innerHTML=`<i class="fa fa-circle condition-symbol"></i>\n        <span class="condition-name">Temperature:</span>\n        <span class="condition-value">${localStorage.getItem("tempValue")}\n        <span class="condition-unit">\n        &#176;F</span></span>`,n.innerHTML='<i class="fa fa-thermometer thermo"></i>\n        <span class="thermo-span">Convert &#176F to &#176C</span>'}else{localStorage.setItem("tempUnit","C");const t=(e-273.15).toFixed(2);localStorage.setItem("tempValue",t),a.innerHTML=`<i class="fa fa-circle condition-symbol"></i>\n        <span class="condition-name">Temperature:</span>\n        <span class="condition-value">${localStorage.getItem("tempValue")}\n        <span class="condition-unit">\n        &#176;C</span></span>`,n.innerHTML='<i class="fa fa-thermometer thermo"></i>\n        <span class="thermo-span">Convert &#176C to &#176F</span>'}},switchMap=(e,a)=>{const n=document.querySelector("#switch-button"),t=document.querySelector(".result-map"),s="https://www.mapquestapi.com/staticmap/v5/map?",i="IvNAwSUNmSxFBKN37pVED3RuRscWNnGk",o="&zoom=14&defaultMarker=marker-end";if("map"!==localStorage.getItem("mapType")&&localStorage.getItem("mapType")){localStorage.setItem("mapType","map");const l=`${s}&key=${i}&locations=${e},${a}${o}&type=map`;t.setAttribute("style",`background-image: url('${l}');`),n.innerHTML='<i class="fa fa-toggle-on thermo"></i>\n        <span class="thermo-span">Switch to Earth View</span>'}else{localStorage.setItem("mapType","hyb");const l=`${s}&key=${i}&locations=${e},${a}${o}&type=hyb`;t.setAttribute("style",`background-image: url('${l}');`),n.innerHTML='<i class="fa fa-toggle-off thermo"></i>\n        <span class="thermo-span">Switch to Map View</span>'}},displayLarge=(e,a)=>{largeImage.classList.add("large-image"),largeImage.innerHTML=`<div class="back">\n    <i id="back-icon" class="fa fa-chevron-circle-left image-next"></i></div>\n    <div class="image" style="background-image: url(${e.largeImageURL})"></div>\n    <div class="next"><i class="top fa fa-times image-next"></i>\n    <i id="next-icon" class="bottom fa fa-chevron-circle-right image-next"></i></div>`,document.querySelector("#back-icon").addEventListener("click",()=>{backLarge(e,a)}),document.querySelector("#next-icon").addEventListener("click",()=>{nextLarge(e,a)}),document.querySelector(".top").addEventListener("click",()=>{removeLarge()}),main.style.display="none",footer.style.display="none"},removeLarge=()=>{main.style.display="block",largeImage.style.display="none",footer.style.display="block"},nextLarge=(e,a)=>{const n=a.indexOf(e),t=n>=a.length-1?0:n+1;displayLarge(a[t],a)},backLarge=(e,a)=>{const n=a.indexOf(e),t=0===n?a.length-1:n-1;displayLarge(a[t],a)},resultPage=(e,a,n)=>{section.classList.add("form-2"),intro.style.display="none",form.classList.add("result-field"),features.style.display="none",message.classList.add("message-2"),clearIcon.style.display="block",placeTitle.style.display="block",placeTitle.classList.add("place-title"),placeTitle.innerHTML=`<span>Postal Code: \n    ${e.components.postcode?e.components.postcode:"Not Available"}\n    </span"><span class="right">Location: ${e.formatted}</span>`,result.style.display="flex",result.classList.add("result"),result.innerHTML=`<div class="result-features">\n    <div class="weather-feature">\n    <div style="background-image: url('http://openweathermap.org/img/wn/${a.weather[0].icon}@2x.png');" class="weather-cloud"></div>\n\n    <div class="condition-box">\n    <p class="cloud-description">${a.weather[0].description}</p>\n    <ul>\n\n    <li class="temp-item"><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Temperature:</span>\n    <span class="condition-value">\n    ${localStorage.getItem("tempValue")||a.main.temp}\n    <span class="condition-unit">&#176;${localStorage.getItem("tempUnit")||"F"}</span></span></li>\n\n    <li><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Pressure:</span>\n    <span class="condition-value">${a.main.pressure}\n    <span class="condition-unit">mb</span></span></li>\n\n    <li><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Visibility:</span>\n    <span class="condition-value">${a.visibility||""}\n    <span class="condition-unit">${a.visibility?"m":"N/A"}</span></span></li>\n\n    <li><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Humidity:</span>\n    <span class="condition-value">${a.main.humidity}\n    <span class="condition-unit">%</span></span></li>\n\n    <li><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Wind Speed:</span>\n    <span class="condition-value">${(2.237*a.wind.speed).toFixed(2)}\n    <span class="condition-unit">mi/hr</span></span></li>\n\n    <li><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Wind Direction:</span>\n    <span class="condition-value">${a.wind.deg||""}\n    <span class="condition-unit">${a.wind.deg?"&#176;":"N/A"}</span></span></li>\n\n    <li><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Cloud Cover:</span>\n    <span class="condition-value">${a.clouds.all||""}\n    <span class="condition-unit">${a.clouds.all?"":"N/A"}</span></span></li>\n\n    <li><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Timezone:</span>\n    <span class="condition-value">${1===Math.sign(a.timezone/3600)?"+":""}${a.timezone/3600}\n    <span class="condition-unit">GMT</span></span></li>\n\n    </ul></div></div>\n\n    <div class="temp-feature">\n    <button id="temp-button" type="button" \n    onclick="changeTemp('${a.main.temp}');">\n    <i class="fa fa-thermometer thermo"></i>\n    <span class="thermo-span">Convert \n    ${"C"===localStorage.getItem("tempUnit")?"&#176C to &#176F":"&#176F to &#176C"}\n    </span></button></div>\n\n    <div class="share-feature">\n    <button id="share-button" type="button">\n    <a href="https://www.facebook.com/sharer/sharer.php?u=${window.location.href}" \n    target="_blank"><i class="fa fa-facebook thermo"></i>\n    <span class="thermo-span">Share to Facebook</span></a>\n    </button></div>\n\n    <div class="switch-feature" \n    onclick="switchMap('${e.geometry.lat}', '${e.geometry.lng}')">\n    <button id="switch-button" type="button">\n    <i class="fa ${"hyb"===localStorage.getItem("mapType")?"fa-toggle-on":"fa-toggle-off"} thermo"></i>\n    <span class="thermo-span">Switch to \n    ${"hyb"===localStorage.getItem("mapType")?"Earth":"Map"}  view</span>\n    </button></div>\n\n    </div>\n\n    <div class="result-map" style="background-image: \n    url('https://www.mapquestapi.com/staticmap/v5/map?key=IvNAwSUNmSxFBKN37pVED3RuRscWNnGk&locations=${e.geometry.lat},${e.geometry.lng}&zoom=14&defaultMarker=marker-end&type=${localStorage.getItem("mapType")||"map"}');">\n    </div>`;const t=document.querySelector(".land-mark");t.innerHTML="",n.forEach(e=>{const a=document.createElement("div");a.style.backgroundImage=`url(${e.largeImageURL})`,a.addEventListener("click",()=>{displayLarge(e,n)}),t.appendChild(a)}),notFound.style.display="none"},errorPage=e=>{result.style.display="none",placeTitle.style.display="none",notFound.style.display="block",notFound.classList.add("not-found"),notFound.innerHTML=`<h1>${e} Not Found!</h1>`},placeSearch=async e=>{main.style.display="none",footer.style.display="none",loader.style.display="block",loader.classList.add("loader"),messageDiv.innerHTML="";try{const a=await fetch(`https://api.opencagedata.com/geocode/v1/json?q=${e}&key=25538790e2f94fa1be1032d20c21e732&language=en&pretty=1&no_annotations=1`),n=await fetch(`http://api.openweathermap.org/data/2.5/weather?q=${e}&APPID=1e32355a85c5965bc24316c27175c6a7`),t=await fetch(`https://pixabay.com/api/?key=14281350-22ea61d1a8aab6d3cae824171&q=${e}&image_type=photo&category=places,buildings,travel`),s=await a.json(),i=await n.json(),o=await t.json();main.style.display="block",footer.style.display="block",loader.style.display="none",input.value=e,resultPage(s.results[0],i,o.hits)}catch(a){input.value=e,errorPage(e)}};