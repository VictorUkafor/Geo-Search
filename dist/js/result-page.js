"use strict";function _slicedToArray(e,a){return _arrayWithHoles(e)||_iterableToArrayLimit(e,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,a){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],t=!0,o=!1,c=void 0;try{for(var i,s=e[Symbol.iterator]();!(t=(i=s.next()).done)&&(n.push(i.value),!a||n.length!==a);t=!0);}catch(e){o=!0,c=e}finally{try{t||null==s.return||s.return()}finally{if(o)throw c}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.placeSearch=exports.clearIcon=exports.input=void 0;var _require=require("./landing-page.js"),main=_require.main,section=_require.section,intro=_require.intro,form=_require.form,message=_require.message,features=_require.features,notFound=_require.notFound,placeTitle=_require.placeTitle,result=_require.result,largeImage=_require.largeImage,loader=_require.loader,footer=_require.footer,input=document.querySelector(".search-field");exports.input=input;var clearIcon=document.querySelector(".cancel");exports.clearIcon=clearIcon;var mapApi="https://www.mapquestapi.com/staticmap/v5/map?",mapApiKey="IvNAwSUNmSxFBKN37pVED3RuRscWNnGk",mapParam="&zoom=14&defaultMarker=marker-end",changeTemp=function(e){var a=document.querySelector(".temp-item"),n=document.querySelector("#temp-button");if(localStorage.getItem("tempUnit"))if("F"===localStorage.getItem("tempUnit")){var t=((localStorage.getItem("tempValue")-32)*(5/9)).toFixed(2);localStorage.setItem("tempUnit","C"),localStorage.setItem("tempValue",t),a.innerHTML='<i class="fa fa-circle condition-symbol"></i>\n      <span class="condition-name">Temperature:</span>\n      <span class="condition-value">'.concat(localStorage.getItem("tempValue"),'\n      <span class="condition-unit">\n      &#176;C</span></span>'),n.innerHTML='<i class="fa fa-thermometer thermo"></i>\n      <span class="thermo-span">Convert &#176C to &#176F</span>'}else{var o=(1.8*localStorage.getItem("tempValue")+32).toFixed(2);localStorage.setItem("tempUnit","F"),localStorage.setItem("tempValue",o),a.innerHTML='<i class="fa fa-circle condition-symbol"></i>\n      <span class="condition-name">Temperature:</span>\n      <span class="condition-value">'.concat(localStorage.getItem("tempValue"),'\n      <span class="condition-unit">\n      &#176;F</span></span>'),n.innerHTML='<i class="fa fa-thermometer thermo"></i>\n      <span class="thermo-span">Convert &#176F to &#176C</span>'}else{localStorage.setItem("tempUnit","C");var c=(e-273.15).toFixed(2);localStorage.setItem("tempValue",c),a.innerHTML='<i class="fa fa-circle condition-symbol"></i>\n      <span class="condition-name">Temperature:</span>\n      <span class="condition-value">'.concat(localStorage.getItem("tempValue"),'\n      <span class="condition-unit">\n      &#176;C</span></span>'),n.innerHTML='<i class="fa fa-thermometer thermo"></i>\n      <span class="thermo-span">Convert &#176C to &#176F</span>'}},switchMap=function(e,a){var n=document.querySelector("#switch-button"),t=document.querySelector(".result-map");if("map"!==localStorage.getItem("mapType")&&localStorage.getItem("mapType")){localStorage.setItem("mapType","map");var o="".concat(mapApi,"&key=").concat(mapApiKey,"&locations=").concat(e,",").concat(a).concat(mapParam,"&type=map");t.setAttribute("style","background-image: url('".concat(o,"');")),n.innerHTML='<i class="fa fa-toggle-on thermo"></i>\n      <span class="thermo-span">Switch to Satellite View</span>'}else{localStorage.setItem("mapType","hyb");var c="".concat(mapApi,"&key=").concat(mapApiKey,"&locations=").concat(e,",").concat(a).concat(mapParam,"&type=hyb");t.setAttribute("style","background-image: url('".concat(c,"');")),n.innerHTML='<i class="fa fa-toggle-off thermo"></i>\n      <span class="thermo-span">Switch to Map View</span>'}},removeLarge="",nextLarge="",backLarge="",displayLarge=function(e,a){largeImage.classList.add("large-image"),largeImage.innerHTML='<div class="back">\n    <i id="back-icon" class="fa fa-chevron-circle-left image-next"></i></div>\n    <div class="image" style="background-image: url('.concat(e.largeImageURL,')"></div>\n    <div class="next"><i class="top fa fa-times image-next"></i>\n    <i id="next-icon" class="bottom fa fa-chevron-circle-right image-next"></i></div>'),document.querySelector("#back-icon").addEventListener("click",(function(){backLarge(e,a)})),document.querySelector("#next-icon").addEventListener("click",(function(){nextLarge(e,a)})),document.querySelector(".top").addEventListener("click",(function(){removeLarge()})),main.style.display="none",footer.style.display="none"};removeLarge=function(){main.style.display="block",largeImage.style.display="none",footer.style.display="block"},nextLarge=function(e,a){var n=a.indexOf(e),t=n>=a.length-1?0:n+1;displayLarge(a[t],a)},backLarge=function(e,a){var n=a.indexOf(e),t=0===n?a.length-1:n-1;displayLarge(a[t],a)};var resultPage=function(e,a,n){document.title="GeoSearch - ".concat(e.formatted),section.classList.add("form-2"),intro.style.display="none",form.classList.add("result-field"),features.style.display="none",message.classList.add("message-2"),clearIcon.classList.add("cancel-2"),clearIcon.style.display="block",placeTitle.style.display="block",placeTitle.classList.add("place-title"),placeTitle.innerHTML="<span>Postal Code: \n    ".concat(e.components.postcode?e.components.postcode:"Not Available",'\n    </span"><span class="right">Location: ').concat(e.formatted,"</span>"),result.style.display="flex",result.classList.add("result"),result.innerHTML='<div class="result-features">\n    <div class="weather-feature">\n    <div style="background-image: url(\'http://openweathermap.org/img/wn/'.concat(a.weather[0].icon,'@2x.png\');" class="weather-cloud"></div>\n\n    <div class="condition-box">\n    <p class="cloud-description">').concat(a.weather[0].description,'</p>\n    <ul>\n\n    <li class="temp-item"><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Temperature:</span>\n    <span class="condition-value">\n    ').concat(localStorage.getItem("tempValue")||a.main.temp,'\n    <span class="condition-unit">&#176;').concat(localStorage.getItem("tempUnit")||"F",'</span></span></li>\n\n    <li><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Pressure:</span>\n    <span class="condition-value">').concat(a.main.pressure,'\n    <span class="condition-unit">mb</span></span></li>\n\n    <li><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Visibility:</span>\n    <span class="condition-value">').concat(a.visibility||"",'\n    <span class="condition-unit">').concat(a.visibility?"m":"N/A",'</span></span></li>\n\n    <li><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Humidity:</span>\n    <span class="condition-value">').concat(a.main.humidity,'\n    <span class="condition-unit">%</span></span></li>\n\n    <li><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Wind Speed:</span>\n    <span class="condition-value">').concat((2.237*a.wind.speed).toFixed(2),'\n    <span class="condition-unit">mi/hr</span></span></li>\n\n    <li><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Wind Direction:</span>\n    <span class="condition-value">').concat(a.wind.deg||"",'\n    <span class="condition-unit">').concat(a.wind.deg?"&#176;":"N/A",'</span></span></li>\n\n    <li><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Cloud Cover:</span>\n    <span class="condition-value">').concat(a.clouds.all||"",'\n    <span class="condition-unit">').concat(a.clouds.all?"":"N/A",'</span></span></li>\n\n    <li><i class="fa fa-circle condition-symbol"></i>\n    <span class="condition-name">Timezone:</span>\n    <span class="condition-value">').concat(1===Math.sign(a.timezone/3600)?"+":"").concat(a.timezone/3600,'\n    <span class="condition-unit">GMT</span></span></li>\n\n    </ul></div></div>\n\n    <div class="temp-feature">\n    <button id="temp-button" type="button">\n    <i class="fa fa-thermometer thermo"></i>\n    <span class="thermo-span">Convert \n    ').concat("C"===localStorage.getItem("tempUnit")?"&#176C to &#176F":"&#176F to &#176C",'\n    </span></button></div>\n\n    <div class="share-feature">\n    <button id="share-button" type="button">\n    <a href="https://www.facebook.com/sharer/sharer.php?u=').concat(window.location.href,'" \n    target="_blank"><i class="fa fa-facebook thermo"></i>\n    <span class="thermo-span">Share to Facebook</span></a>\n    </button></div>\n\n    <div class="switch-feature">\n    <button id="switch-button" type="button">\n    <i class="fa ').concat("hyb"===localStorage.getItem("mapType")?"fa-toggle-on":"fa-toggle-off",' thermo"></i>\n    <span class="thermo-span">Switch to \n    ').concat("hyb"===localStorage.getItem("mapType")?"Satellite":"Map",'  View</span>\n    </button></div>\n\n    </div>\n    <div class="result-map" style="background-image: \n    url(\'').concat(mapApi,"&key=").concat(mapApiKey,"&locations=").concat(e.geometry.lat,",").concat(e.geometry.lng).concat(mapParam,"&type=").concat(localStorage.getItem("mapType")||"map","');\">\n    </div>"),document.querySelector(".temp-feature").addEventListener("click",(function(){changeTemp(a.main.temp)})),document.querySelector(".switch-feature").addEventListener("click",(function(){switchMap(e.geometry.lat,e.geometry.lng)}));var t=document.querySelector(".land-mark");t.innerHTML="",n.forEach((function(e){var a=document.createElement("div");a.style.backgroundImage="url(".concat(e.largeImageURL,")"),a.addEventListener("click",(function(){displayLarge(e,n)})),t.appendChild(a)})),notFound.style.display="none"},errorPage=function(e){result.style.display="none",placeTitle.style.display="none",notFound.style.display="block",notFound.classList.add("not-found"),notFound.innerHTML="<h1>".concat(e," Not Found!</h1>")},placeSearch=function(e){var a,n,t,o,c,i,s,l,r,p;return regeneratorRuntime.async((function(m){for(;;)switch(m.prev=m.next){case 0:return main.style.display="none",footer.style.display="none",loader.style.display="block",loader.classList.add("loader"),message.innerHTML="",m.prev=5,"https://api.opencagedata.com/geocode/v1/json?","25538790e2f94fa1be1032d20c21e732","&language=en&pretty=1&no_annotations=1","http://api.openweathermap.org/data/2.5/weather?","1e32355a85c5965bc24316c27175c6a7","https://pixabay.com/api/?","14281350-22ea61d1a8aab6d3cae824171","&image_type=photo&category=places,buildings,travel",m.next=16,regeneratorRuntime.awrap(Promise.all([fetch("".concat("https://api.opencagedata.com/geocode/v1/json?","q=").concat(e,"&key=").concat("25538790e2f94fa1be1032d20c21e732").concat("&language=en&pretty=1&no_annotations=1")),fetch("".concat("http://api.openweathermap.org/data/2.5/weather?","q=").concat(e,"&APPID=").concat("1e32355a85c5965bc24316c27175c6a7")),fetch("".concat("https://pixabay.com/api/?","key=").concat("14281350-22ea61d1a8aab6d3cae824171","&q=").concat(e).concat("&image_type=photo&category=places,buildings,travel"))]));case 16:return a=m.sent,n=_slicedToArray(a,3),t=n[0],o=n[1],c=n[2],m.next=23,regeneratorRuntime.awrap(Promise.all([t.json(),o.json(),c.json()]));case 23:i=m.sent,s=_slicedToArray(i,3),l=s[0],r=s[1],p=s[2],main.style.display="block",footer.style.display="block",loader.style.display="none",input.value=e,resultPage(l.results[0],r,p.hits),m.next=39;break;case 35:m.prev=35,m.t0=m.catch(5),input.value=e,errorPage(e);case 39:case"end":return m.stop()}}),null,null,[[5,35]])};exports.placeSearch=placeSearch;